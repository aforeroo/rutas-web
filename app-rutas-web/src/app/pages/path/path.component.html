<div class="contenedor">

    <div class="sidebar m-2">

        <h4>Path configuration</h4>

        <div class="row text-left">

            <div class="col">
                <button class="btn btn-danger" routerLink="/paths">
                    <i class="fa fa-arrow-left"></i>
                    Go back
                </button>
            </div>
        </div>

        <br>

        <div class="row">

            <div class="col">

                <form (ngSubmit)="save(f)" #f="ngForm">

                    <div class="form-group">
                        <label>Path ID <br><small>The unique identifier for the route plan (auto-generated)</small></label>
                        <input [(ngModel)]="id" name="id" type="text" class="form-control" placeholder="{{id}}" disabled>
                    </div>

                    <br>

                    <div class="form-group">
                        <label>description (optional) <br><small>A reminder about the details and purpose of the fligth plan</small></label>
                        <textarea id="description" placeholder="this route is for ..." class="form-control" [(ngModel)]="path.description" name="description"></textarea>

                    </div>

                    <br>

                    <hr>


                    <!-- panel contraido/expandido para listar los waypoints-->
                    <mat-accordion class="configuration-panel">
                        <mat-expansion-panel (opened)=true>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    List of Waypoints
                                </mat-panel-title>

                                <mat-panel-description>
                                    edit the waypoints of the route

                                </mat-panel-description>
                            </mat-expansion-panel-header>

                            <div *ngIf="path.PATH.length==0">
                                <h5 class=" text-center ">No waypoints asociated with the route yet</h5>
                                <p class="text-center">add waypoints by clicking over the map</p>
                            </div>

                            <div *ngIf="path.PATH.length>0" class="mitabla">
                                <h5 class=" text-center ">Waypoints</h5>

                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col " class="text-center ">Order</th>
                                            <th scope="col " class="text-center ">Latitude</th>
                                            <th scope="col " class="text-center ">Longitude</th>
                                            <th scope="col " class="text-center ">Height</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of path.PATH">
                                            <th scope="row " class="text-center ">{{item.ID + 1}}</th>
                                            <td class="text-center "> {{item.ZLatitude | number: '1.0-5'}}</td>
                                            <td class="text-center "> {{item.XLongitude | number: '1.0-5'}}</td>

                                            <td class="text-center ">{{path.PATH[item.ID].YAltitude}}m</td>
                                            <!-- <td><input type="number" class="form-control text-center" [(ngModel)]="path.PATH[item.ID].YAltitude" name="{{item.ID}}" placeholder=""></td>-->
                                        </tr>

                                    </tbody>
                                </table>

                            </div>
                        </mat-expansion-panel>



                        <!-- panel expandido/contraido  -->
                        <mat-expansion-panel (opened)=true>
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    Camera Tasks
                                </mat-panel-title>
                                <mat-panel-description>
                                    configure camera actions along the flight

                                </mat-panel-description>

                            </mat-expansion-panel-header>


                            <div *ngIf="path.PATH.length==0">
                                <h5 class=" text-center ">No waypoints</h5>
                                <p class="text-center">before configure camera tasks add waypoins to the route</p>
                            </div>


                            <div *ngIf="path.PATH.length>0" class="mitabla">
                                <h5 class=" text-center ">Camera Tasks</h5>

                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col " class="text-center ">#</th>
                                            <th scope="col " class="text-center ">Height(m)</th>

                                            <th scope="col " class="text-center "><i class="fa fa-camera"></i></th>
                                            <th scope="col " class="text-center "><i class="fa fa-video"></i></th>
                                            <th scope="col " class="text-center ">
                                                <mat-icon> 360</mat-icon>

                                            </th>
                                            <th scope="col " class="text-center ">
                                                <mat-icon> timer</mat-icon>

                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of path.PATH">
                                            <th scope="row " class="text-center ">{{item.ID}}</th>
                                            <td class="text-center ">{{item.YAltitude}} m</td>

                                            <td class="text-center "><input type="checkbox" onclick=""></td>
                                            <td class="text-center "><input type="checkbox" onclick=""></td>
                                            <td class="text-center "><input type="checkbox" onclick=""></td>
                                            <td class="text-center "><input type="checkbox" onclick=""></td>


                                        </tr>

                                    </tbody>
                                </table>

                            </div>

                        </mat-expansion-panel>
                    </mat-accordion>



                    <hr>

                    <div class="form-group text-center ">
                        <button mat-raised-button color="primary" class="w-50 " type="submit ">
                            <i class="fa fa-save "></i>
                            Submit
                        </button>
                    </div>






                </form>


            </div>

        </div>

    </div>

    <div class="map">

        <p>Seleccione en el mapa los waypoints a recorrer</p>
        <google-map width="auto" height="800px" [options]="options" (mapClick)="addWaypoint($event)">






            <map-marker #marker="mapMarker" *ngFor=" let markerPosition of currentPathGoogle; let i = index " [position]="markerPosition " [label]="(i+1) + ''" (mapClick)="openInfoWindow(marker, i)">
                <map-polyline [path]="currentPathGoogle "></map-polyline>
                <map-info-window>
                    <h5 class="text-center">Waypoint # {{path.PATH[i].ID + 1}}</h5>
                    <div class="point-input">
                        <p class="text-center"> height (m) : </p>
                        <span><input type="number" class="form-control text-center" [(ngModel)]="path.PATH[i].YAltitude" name="{{i}}" placeholder=""></span>
                    </div>

                </map-info-window>
            </map-marker>





        </google-map>
    </div>
</div>